<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PELMA: PELMA</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PELMA
   </div>
   <div id="projectbrief">AfullyfunctioningEventLoopManager(ELMA)LibraryinPython.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">PELMA </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/ashikaro/Elma">PELMA</a> is a python event loop manager which can be used by embedded and reactive systems application in Python.</p>
<p>The source code for this project is available here <a href="https://github.com/ashikaro/Elma">github</a>.</p>
<h2>Installation </h2>
<pre class="fragment">git clone https://github.com/ashikaro/Elma.git
cd Elma
make build
make run
make docs
</pre><h2>Execution </h2>
<p>To run the test process in the container, type </p><pre class="fragment">python -m unittest
or 
make test
</pre><p>This runs the unit tests we have written for testing a simple process and the test robot.</p>
<h2>Testing </h2>
<p>To run tests, do </p><div class="fragment"><div class="line">make test</div></div><!-- fragment --><h2>Architecture </h2>
<ol type="1">
<li>This project is designed to work as an ELMA python library which can be published to an artifactory and embedded applications can add this as a dependency to incorporate ELMA into their system.</li>
</ol>
<ol type="1">
<li>All the core ELMA classes Manger, Process, Event behave functionally the same way as the C++ ELMA we have built in this class.</li>
</ol>
<ol type="1">
<li>As a proof concept to test if ELMA can be used in Embedded apps, we have implemented a simple robot which leverage the ELMA APIs to perform simple operations similar to the assignment 7</li>
</ol>
<h2>Challenges </h2>
<ol type="1">
<li>Understanding object oriented nuances specific to Python which is a lot different from C++.</li>
<li>Steep learning curve considering my inexperience in Python and object oriented languages in general.</li>
<li>Implementing virtual methods where we want base class(process) to have no implementation and expect child classes to implement.</li>
<li>Python does not have multi argument constructors.</li>
<li>Using python closures with nested function for setting up event handling for all the transitions(StateMachine's init)</li>
<li>Writing lambdas in python for event handling.</li>
</ol>
<h2>Results </h2>
<ol type="1">
<li>We have written tests for testing Core ELMA APIs and Robot Finite State Machine. Here is the log of the run: <div class="fragment"><div class="line">Running tests for core ELMA APIs Using ELMA Manager to test: 1. Initializing a process 2. Scheduling a process  3. Updating a process 4. Event handler methods watch and emit</div><div class="line">&lt;elma.test.test_process.TestProcess object at 0x7f329ad3efd0&gt;</div><div class="line">watching for hello</div><div class="line">watching for pi</div><div class="line">emitting hello event</div><div class="line"></div><div class="line">emitting event hello</div><div class="line">emitting event hello</div><div class="line">emitting pi event</div><div class="line"></div><div class="line">emitting event pi</div><div class="line">emitting event pi</div><div class="line"></div><div class="line">Running first set of tests for python client Robot Leveraging ELMA APIs.</div><div class="line">Initializing Robot States and making sure states get unique IDs</div><div class="line">Id for state Recharge is 0</div><div class="line">Id for state Wander is 1</div><div class="line">Id for state Find Recharge Station is 2</div><div class="line">Id for state Evade is 3</div><div class="line">Id for state Make Noise is 4</div><div class="line">adding transition for event found recharge station from Find Recharge Station to Recharge</div><div class="line">adding transition for event battery full from Recharge to Wander</div><div class="line">adding transition for event battery low from Wander to Find Recharge Station</div><div class="line">adding transition for event battery low from Evade to Find Recharge Station</div><div class="line">adding transition for event start from Wander to Wander</div><div class="line">adding transition for event reset from Make Noise to Wander</div><div class="line">adding transition for event reset from Evade to Make Noise</div><div class="line">adding transition for event intruder detected from Wander to Make Noise</div><div class="line">adding transition for event proximity warning from Make Noise to Evade</div><div class="line">&lt;elma.api.robot.Robot object at 0x7f329ad3ee48&gt;</div><div class="line">watching for found recharge station</div><div class="line">watching for battery full</div><div class="line">watching for battery low</div><div class="line">watching for battery low</div><div class="line">watching for start</div><div class="line">watching for reset</div><div class="line">watching for reset</div><div class="line">watching for intruder detected</div><div class="line">watching for proximity warning</div><div class="line">&lt;elma.api.robot.Robot object at 0x7f329ad3ee48&gt;</div><div class="line">calling entry method of Wander</div><div class="line">emitting event start</div><div class="line">calling exit method of Wander</div><div class="line">calling entry method of Wander</div><div class="line">Wander</div><div class="line">emitting event intruder detected</div><div class="line">emitting event intruder detected</div><div class="line">calling exit method of Wander</div><div class="line">calling entry method of Make Noise</div><div class="line">Make Noise</div><div class="line">emitting event proximity warning</div><div class="line">calling exit method of Make Noise</div><div class="line">calling entry method of Evade</div><div class="line">Evade</div><div class="line">emitting event battery full</div><div class="line">Evade</div><div class="line">Running First set tests for python client Robot Leveraging ELMA APIs.</div><div class="line">Initializing Robot States and making sure states get unique IDs</div><div class="line">Id for state Recharge is 5</div><div class="line">Id for state Wander is 6</div><div class="line">Id for state Find Recharge Station is 7</div><div class="line">Id for state Evade is 8</div><div class="line">Id for state Make Noise is 9</div><div class="line">adding transition for event found recharge station from Find Recharge Station to Recharge</div><div class="line">adding transition for event battery full from Recharge to Wander</div><div class="line">adding transition for event battery low from Wander to Find Recharge Station</div><div class="line">adding transition for event battery low from Evade to Find Recharge Station</div><div class="line">adding transition for event start from Wander to Wander</div><div class="line">adding transition for event reset from Make Noise to Wander</div><div class="line">adding transition for event reset from Evade to Make Noise</div><div class="line">adding transition for event intruder detected from Wander to Make Noise</div><div class="line">adding transition for event proximity warning from Make Noise to Evade</div><div class="line">&lt;elma.api.robot.Robot object at 0x7f329ad02be0&gt;</div><div class="line">watching for found recharge station</div><div class="line">watching for battery full</div><div class="line">watching for battery low</div><div class="line">watching for battery low</div><div class="line">watching for start</div><div class="line">watching for reset</div><div class="line">watching for reset</div><div class="line">watching for intruder detected</div><div class="line">watching for proximity warning</div><div class="line">&lt;elma.api.robot.Robot object at 0x7f329ad02be0&gt;</div><div class="line">calling entry method of Wander</div><div class="line">Wander</div><div class="line">emitting event battery low</div><div class="line">emitting event battery low</div><div class="line">calling exit method of Wander</div><div class="line">calling entry method of Find Recharge Station</div><div class="line">Find Recharge Station</div><div class="line">emitting event found recharge station</div><div class="line">calling exit method of Find Recharge Station</div><div class="line">calling entry method of Recharge</div><div class="line">Recharge</div><div class="line">emitting event battery full</div><div class="line">calling exit method of Recharge</div><div class="line">calling entry method of Wander</div><div class="line">Wander</div><div class="line">emitting event intruder detected</div><div class="line">calling exit method of Wander</div><div class="line">calling entry method of Make Noise</div><div class="line">Make Noise</div><div class="line">emitting event reset</div><div class="line">calling exit method of Make Noise</div><div class="line">calling entry method of Wander</div><div class="line">Wander</div><div class="line">emitting event intruder detected</div><div class="line">calling exit method of Wander</div><div class="line">calling entry method of Make Noise</div><div class="line">Make Noise</div><div class="line">emitting event proximity warning</div><div class="line">calling exit method of Make Noise</div><div class="line">calling entry method of Evade</div><div class="line">Evade</div><div class="line">emitting event battery low</div><div class="line">calling exit method of Evade</div><div class="line">calling entry method of Find Recharge Station</div><div class="line">Find Recharge Station</div><div class="line">.</div><div class="line">----------------------------------------------------------------------</div><div class="line">Ran 3 tests in 0.002s</div><div class="line"></div><div class="line">OK</div></div><!-- fragment --></li>
</ol>
<h1>Milestones</h1>
<p>*No changes to the milestones. Going as per the plan.</p><ol type="1">
<li>Requirement Analysis, design, scoping by 12th March 2019</li>
</ol>
<ol type="1">
<li>Implement core Elma APIs(Process,Manager) in python by 13th March 2019</li>
</ol>
<ol type="1">
<li>Implement API's for FSM.(State,State Machine) in python by 16th March 2019</li>
</ol>
<ol type="1">
<li>Implement python client using elma to test a simple robot FSM by 18th March 2019</li>
</ol>
<ol type="1">
<li>Documentation using Doxygen generated API descriptions for all classes and methods by 20th March 2019</li>
</ol>
<h1>Current Accomplishments</h1>
<ol type="1">
<li>Accomplished all the milestones.</li>
</ol>
<h1>Resources</h1>
<ul>
<li>Pluralsight course Python Fundamentals.</li>
<li>PyCharm IDE for Python.</li>
<li>Will use C++ elma API's used in this course as a reference.</li>
<li>Unit Tests for hw_7, for building test robot finite state machine.</li>
</ul>
<h2>Acknowledgements </h2>
<h2>References </h2>
<ol type="1">
<li>Tests not running - <a href="https://stackoverflow.com/questions/43957860/python-unittest-ran-0-tests-in-0-000s">https://stackoverflow.com/questions/43957860/python-unittest-ran-0-tests-in-0-000s</a> <a href="https://stackoverflow.com/questions/7562775/deriving-a-class-from-testcase-throws-two-errors">https://stackoverflow.com/questions/7562775/deriving-a-class-from-testcase-throws-two-errors</a></li>
<li>Docker not able to bring bash shell up. Instead used sh <a href="https://stackoverflow.com/questions/27959011/why-does-docker-say-it-cant-execute-bash">https://stackoverflow.com/questions/27959011/why-does-docker-say-it-cant-execute-bash</a></li>
<li>Docker image for Python reference <a href="https://blog.realkinetic.com/building-minimal-docker-containers-for-python-applications-37d0272c52f3">https://blog.realkinetic.com/building-minimal-docker-containers-for-python-applications-37d0272c52f3</a></li>
<li>Python time in milliseconds <a href="https://blog.realkinetic.com/building-minimal-docker-containers-for-python-applications-37d0272c52f3">https://blog.realkinetic.com/building-minimal-docker-containers-for-python-applications-37d0272c52f3</a></li>
<li>Declaring static variables <a href="https://www.geeksforgeeks.org/g-fact-34-class-or-static-variables-in-python/">https://www.geeksforgeeks.org/g-fact-34-class-or-static-variables-in-python/</a></li>
<li>Inner functions and closures for event handling <a href="https://realpython.com/inner-functions-what-are-they-good-for/">https://realpython.com/inner-functions-what-are-they-good-for/</a> </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
